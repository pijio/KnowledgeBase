Все мы любим абстракции. Они предоставляют нам мощные инструменты для упрощения сложных концепций, позволяя фокусироваться на сути проблемы, а не на ее деталях. Абстракции пронизывают каждый уровень разработки, облегчая создание, поддержку и масштабирование программных систем. Погружаясь в этот калейдоскоп, мы открываем перед собой мир бескрайних возможностей и творческого вдохновения.

MassTransit - библиотека, абстрагирующая работу над большинством популярных брокеров сообщений (Azure Service Bus, RabbitMQ, Kafka и т.д.), что позволяет разработчикам не тратить много времени на конкретную реализацию, а сосредоточиться на задачах функциональности.

Рассмотрим каждый аспект AMQP в призме MassTransit
- **Сообщения** - в MassTransit представлены двумя основными типами: команды (Commands) и события (Events)
		- Команды - это сообщения, которые говорят сервису что-то сделать и, как правило, для одной команды существует один получатель (Consumer).
		- События - сообщения, которые оповещают о том, что что-то произошло, и которые могут быть отправлены сразу нескольким подписанным получателям.
- **Producer** - сообщение должен кто-то отправить. И MassTransit предоставляет два основных способа отправки: Send и Publish в интерфейсе IBus (получить можно через DI).
		- Сообщение, отправленное с помощью Send, доставляется по определенному адресу. Обычно, с помощью Send отправляются команды.
		- Сообщение, опубликованное через Publish, распространяется ко всем подписчикам, которые подписывались на сообщение данного типа. Например, как оповещение о событии
- **Consumer**. В MassTransit можно подписаться на сообщения одного или сразу нескольких типов. Для этого класс-подписчик должен унаследовать интерфейс IConsumer<,> и реализовать его метод Task Consume().
- **Обменники**. Подробнее о обменниках в RabbitMQ [[3. RabbitMQ. Exchanges|тут]]. MassTransit по умолчанию использует Fanout Exchange. Если вкратце - данный вид Exchange распределяет все полученные сообщения между всеми [[2. RabbitMQ. Очереди | очередями]], которые подписаны на данный тип сообщений. В документации MassTransit указано, что данный тип обмена сообщениями был выбран, потому что он является наиболее производительным для RabbitMQ. Для каждого сообщения, на которое существует хотя бы один подписчик, MT создает точку обмена (exchange) с именем по шаблону Namespace:ClassName и привязывает к ней очереди подписчиков. Обменник по умолчанию создается перманентным или устойчивым. Устойчивые обменники и очереди удобны тем, что, если в момент публикации сообщения издателем подписчик отключен от сервера очередей, опубликованное сообщение все равно не пройдёт мимо подписчика, а встанет в очередь и тихонько дождется его (подписчика) подключения.

Официальная документация MassTransit [тут](https://masstransit.io/documentation/concepts)