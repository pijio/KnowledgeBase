`Exchange` — обменник или точка обмена. В него отправляются сообщения. `Exchange` **распределяет сообщение** в одну или несколько очередей. Он **маршрутизирует сообщения в очередь** на основе созданных связей (`bindings`) между ним и очередью.
Как и непосредственно в AMQP выделяют следующие виды обменников:
#### Direct Exchange (Прямой обменник)
- Принцип работы: Сообщение отправляется в очередь, если его ключ маршрутизации (routing key) совпадает с ключом маршрутизации, указанным при создании binding.
- Пример использования: Передача сообщений с конкретными характеристиками, например, по типу события.
#### Fanout Exchange (Обменник распространения)
- Принцип работы: Сообщение отправляется во все очереди, связанные с обменником, независимо от ключа маршрутизации.
- Пример использования: Рассылка сообщений всем подписчикам, независимо от их интересов.
#### Topic Exchange (Тематический обменник)
- Принцип работы: Сообщение отправляется в очередь, если его ключ маршрутизации соответствует шаблону ключа, указанному при создании связи с обменником. Шаблоны ключей, содержат метасимволы (* и #) для определения, кому передать сообщение. * соответствует одному слову, а # - неопределенному числу слов.
- Пример использования: Распределение сообщений по темам (например, все сообщения о животных отправляются в одну очередь, а о растениях в другую).
#### **Headers Exchange (Обменник с заголовками):**
- Принцип работы: Сообщение отправляется в очередь, если значения его заголовков соответствуют значениям, указанным при создании binding с обменником.
- Пример использования: Фильтрация сообщений по их характеристикам, определенным в заголовках.

### "А пачиму я нимагу сразу прадьюсить в очиредь?7??7"
Использование обменников предоставляет дополнительный уровень гибкости и контроля над тем, как сообщения маршрутизируются и доставляются в очереди. Обменники позволяют вам определить правила маршрутизации, которые определяют, какие сообщения отправляются в какие очереди.
Кейсы в которых это может быть полезно:
**Мультиплексирование сообщений** - если есть несколько типов сообщений, и необходимо отправлять их в разные очереди в зависимости от их характеристик (например, типа события, приоритета и т.д.), можно использовать различные типы обменников.
**Фильтрация сообщений** - обменники позволяют определить правила маршрутизации, основанные на значениях ключей маршрутизации или заголовков сообщений. Это полезно, если необходимо фильтровать сообщения и отправлять их только в определенные очереди.
**Распределение сообщений по всем консьюмерам** - Fanout Exchange позволяет отправлять сообщения всем подписчикам, независимо от того, кто их ожидает. Это полезно, например, для рассылки сообщений всем компонентам системы, зарегистрированным в обменнике.
**Тематическая маршрутизация** -Topic Exchange позволяет вам создавать более сложные правила маршрутизации на основе шаблонов ключей маршрутизации. Это удобно, если имеются различные категории сообщений и вы хотите отправлять их в соответствующие очереди.
Подход "продьюсить сразу в очередь" может быть использован, но он ограничен и не предоставляет такого уровня гибкости и контроля, который предлагают обменники.